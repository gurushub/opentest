package com.open.pact;



import java.io.IOException;

import org.apache.http.HttpResponse;
import org.apache.http.client.fluent.Request;
import org.apache.http.util.EntityUtils;

public class DummyConsumerOpenTest {
	  private String url;

	    public DummyConsumerOpenTest(String url) {
	        this.url = url;
	    }

	    public String getMovies() throws IOException{
	        HttpResponse response = getResponse("/restapi/movies/");
	        System.out.println("response: "+getEntityAsString(response));
	        return getEntityAsString(response);
//	        return response;
//	        return 200;
	    }

	    private String getEntityAsString(HttpResponse response) throws IOException {
	        return EntityUtils.toString(response.getEntity());
	    }

	    public HttpResponse getResponse(String path) throws IOException {
	            return Request.Get(url + path)
	                .execute().returnResponse();
	    	
	    }
}
