/**
 * 
 */
package com.opentest.restassured;

import java.util.HashMap;
import java.util.Set;

import org.testng.Assert;

import io.restassured.response.Response;



/**
 * @author mm955y
 *
 */
public class RestValidator {
	private Response response;

	public RestValidator(Response response) {
		this.response = response;
	}

	public RestValidator expectCode(int expectedCode) {
		Assert.assertEquals(response.statusCode(), expectedCode, "Incorrect Response Code");
		return this;
	}

	public RestValidator expectMessage(String message) {
		Assert.assertEquals("Incorrect Response Message", message, response.getStatusLine());
		return this;
	}

	public RestValidator expectHeader(String headerName, String headerValue) {
		Assert.assertEquals("Incorrect header - " + headerName, headerValue, response.getHeader(headerName));
		return this;
	}

	public RestValidator expectHeaders(HashMap<String, String> headers) {
		Set<String> keys = headers.keySet();
		for (String key : keys) {
			Assert.assertEquals("Incorrect header - " + key, headers.get(key), response.getHeader(key));
		}
		return this;
	}

	public RestValidator expectInBody(String content) {
		Assert.assertTrue(response.getBody().asString().contains(content), "Body doesn't contain string : " + content);
		return this;
	}
	
	public RestValidator printBody(){
		System.out.println(response.getBody().asString());
		return this;
	}
	
	public Response getResponse(){
		return response;
	}

}
